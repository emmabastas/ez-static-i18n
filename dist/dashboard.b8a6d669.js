var e={};function t(e,t){return e instanceof HTMLElement&&e.tagName.toLowerCase()===t}async function n(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await window.crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}class r extends HTMLElement{constructor(){super(),this.initialized=!1,this.languages=[]}static get observedAttributes(){return["project-name"]}connectedCallback(){this.initialized||(this.initialized=!0,setTimeout(this.foo.bind(this),0))}async foo(){let e=this.children[0];if(!t(e,"table")||(console.log(this.children),0===e.children.length))throw Error("Unexpected");let[r,i]=e.children;if(!t(r,"thead")||!t(i,"tbody")||1!==r.children.length||!t(r.children[0],"tr"))throw Error("Unexpected");let l=r.children[0],o=i.children;if(!t(l,"tr")||0===l.children.length)throw Error("Unexpected");for(let e of l.children){if(!t(e,"th"))throw Error("Unexpected");this.languages.push(e.innerHTML)}for(let e of o){if(!t(e,"tr")||![...e.children].every(e=>t(e,"td")))throw Error("Unexpected");let r=[...e.children];if(e.children.length!==this.languages.length)throw Error("Unexpected");let i=r[0].innerText,l=await n(i);for(let[t,n]of(e.id=l,function e(t,n){return 0===t.length||0===n.length?[]:[[t.pop(),n.pop()],...e(t,n)]}(r.slice(1),this.languages.slice(1)))){let e=document.createElement("input");e.setAttribute("type","text"),e.value=t.innerText,t.replaceChildren(e),e.addEventListener("change",()=>{fetch(`/translation/${this.getAttribute("project-name")}/${n}/${l}/`,{method:"POST",body:e.value,headers:{"Content-Type":"text/plain"}})})}}}}customElements.define("translation-table",r);export{e as default};
//# sourceMappingURL=dashboard.b8a6d669.js.map
